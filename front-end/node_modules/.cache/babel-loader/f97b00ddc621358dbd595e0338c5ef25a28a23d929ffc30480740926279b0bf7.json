{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      code: '',\n      accesstoken: '',\n      patient: '',\n      patientdata: {},\n      clientId: '2a8767b8-2c3c-474a-8ffa-00e4d2f93308',\n      // Replace with your client id\n      redirect: 'http://localhost:3000/mychart'\n    };\n  },\n  computed: {\n    authorizeLink() {\n      return `https://fhir.epic.com/interconnect-fhir-oauth/oauth2/authorize?response_type=code&redirect_uri=${this.redirect}&client_id=${this.clientId}&state=1234&scope=patient.read, patient.search`;\n    }\n  },\n  async mounted() {\n    console.log(this.$route.query.code);\n    this.code = this.$route.query.code;\n    if (this.code != undefined) {\n      const params = new URLSearchParams();\n      params.append('grant_type', 'authorization_code');\n      params.append('redirect_uri', this.redirect);\n      params.append('code', this.code);\n      params.append('client_id', this.clientId);\n      params.append('state', '1234');\n      const config = {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      };\n      await axios.post('https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token', params, config).then(response => {\n        console.log(response.data);\n        this.accesstoken = response.data.access_token;\n        this.patient = response.data.patient;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n    if (this.accesstoken != '') {\n      await axios.get(`https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4/Patient/${this.patient}`, {\n        headers: {\n          Authorization: `Bearer ${this.accesstoken}`\n        }\n      }).then(response => {\n        this.patientdata = response.data;\n        console.log(response);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }\n};\n// const state = reactive({ count: 0 })","map":{"version":3,"mappings":"AAyEC,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACdC,IAAI,GAAG;IACN,OAAO;MACNC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,EAAE;MACfC,OAAO,EAAE,EAAE;MACXC,WAAW,EAAE,CAAC,CAAC;MACfC,QAAQ,EAAE,sCAAsC;MAAE;MAClDC,QAAQ,EAAE;IACX,CAAC;EACF,CAAC;EACDC,QAAQ,EAAE;IACTC,aAAa,GAAG;MACf,OAAQ,kGAAiG,IAAI,CAACF,QAAS,cAAa,IAAI,CAACD,QAAS,gDAA+C;IAClM;EACD,CAAC;EACD,MAAMI,OAAO,GAAG;IACfC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACC,MAAM,CAACC,KAAK,CAACZ,IAAI,CAAC;IACnC,IAAI,CAACA,IAAG,GAAI,IAAI,CAACW,MAAM,CAACC,KAAK,CAACZ,IAAI;IAClC,IAAI,IAAI,CAACA,IAAG,IAAKa,SAAS,EAAE;MAC3B,MAAMC,MAAK,GAAI,IAAIC,eAAe,EAAE;MACpCD,MAAM,CAACE,MAAM,CAAC,YAAY,EAAE,oBAAoB,CAAC;MACjDF,MAAM,CAACE,MAAM,CAAC,cAAc,EAAE,IAAI,CAACX,QAAQ,CAAC;MAC5CS,MAAM,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAAChB,IAAI,CAAC;MAChCc,MAAM,CAACE,MAAM,CAAC,WAAW,EAAE,IAAI,CAACZ,QAAQ,CAAC;MACzCU,MAAM,CAACE,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC;MAC9B,MAAMC,MAAK,GAAI;QACdC,OAAO,EAAE;UACR,cAAc,EAAE;QACjB;MACD,CAAC;MACD,MAAMpB,KAAI,CACRqB,IAAI,CACJ,4DAA4D,EAC5DL,MAAM,EACNG,MAAK,CACN,CACCG,IAAI,CAAEC,QAAQ,IAAK;QACnBZ,OAAO,CAACC,GAAG,CAACW,QAAQ,CAACtB,IAAI,CAAC;QAC1B,IAAI,CAACE,WAAU,GAAIoB,QAAQ,CAACtB,IAAI,CAACuB,YAAY;QAC7C,IAAI,CAACpB,OAAM,GAAImB,QAAQ,CAACtB,IAAI,CAACG,OAAO;MACrC,CAAC,EACAqB,KAAK,CAAC,UAAUC,KAAK,EAAE;QACvBf,OAAO,CAACC,GAAG,CAACc,KAAK,CAAC;MACnB,CAAC,CAAC;IACJ;IACA,IAAI,IAAI,CAACvB,WAAU,IAAK,EAAE,EAAE;MAC3B,MAAMH,KAAI,CACR2B,GAAG,CACF,qEAAoE,IAAI,CAACvB,OAAQ,EAAC,EACnF;QAAEgB,OAAO,EAAE;UAAEQ,aAAa,EAAG,UAAS,IAAI,CAACzB,WAAY;QAAE;MAAE,EAC5D,CACCmB,IAAI,CAAEC,QAAQ,IAAK;QACnB,IAAI,CAAClB,WAAU,GAAIkB,QAAQ,CAACtB,IAAI;QAChCU,OAAO,CAACC,GAAG,CAACW,QAAQ,CAAC;MACtB,CAAC,EACAE,KAAK,CAAEC,KAAK,IAAK;QACjBf,OAAO,CAACC,GAAG,CAACc,KAAK,CAAC;MACnB,CAAC,CAAC;IACJ;EACD;AACD,CAAC;AACD","names":["axios","data","code","accesstoken","patient","patientdata","clientId","redirect","computed","authorizeLink","mounted","console","log","$route","query","undefined","params","URLSearchParams","append","config","headers","post","then","response","access_token","catch","error","get","Authorization"],"sourceRoot":"","sources":["C:\\Users\\raamb\\Desktop\\MedicalBilling\\front-end\\src\\components\\MyChart.vue"],"sourcesContent":["<template>\r\n\t<div class=\"container\">\r\n\t\t<div style=\"text-align: center\">\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\t<h3>Link your MyChart Account</h3>\r\n\t\t\t<h5>Linking your MyChart Account Helps us Check for Errors in your Bill</h5>\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\t<p><strong>Test Username:</strong> fhircamila</p>\r\n\t\t\t<p><strong>Test Password:</strong> epicepic1</p>\r\n\t\t\t<a\r\n\t\t\t\tclass=\"btn btn-info\"\r\n\t\t\t\tv-if=\"code == undefined\"\r\n\t\t\t\tstyle=\"text-decoration: none\"\r\n\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t:href=\"authorizeLink\">\r\n\t\t\t\tSign in\r\n\t\t\t</a>\r\n\t\t\t<hr />\r\n\t\t</div>\r\n\t\t<div v-if=\"accesstoken\">\r\n\t\t\t<p><strong>Patient Id:</strong> {{ patient }}</p>\r\n\r\n\t\t\t<strong>Name: </strong>{{ patientdata.name[0].text }}<br />\r\n\t\t\t<strong>Birth Date: </strong>{{ patientdata.birthDate }} <br />\r\n\t\t\t<strong>Gender: </strong>{{ patientdata.gender }} <br />\r\n\t\t\t<strong>Vital Status: </strong\r\n\t\t\t>{{ patientdata.deceasedBoolean ? 'Dead' : 'Alive' }} <br />\r\n\t\t\t<strong>Marital Status: </strong>{{ patientdata.maritalStatus.text }}\r\n\t\t\t<br />\r\n\t\t\t<strong>Telecom: </strong> <br />\r\n\t\t\t<div v-for=\"telecom in patientdata.telecom\" :key=\"telecom.value\">\r\n\t\t\t\t<div class=\"ml-2\">\r\n\t\t\t\t\t<strong>{{ telecom.system }}</strong> -\r\n\t\t\t\t\t{{ telecom.use }}\r\n\t\t\t\t\t{{ telecom.value }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<strong>Address: </strong> <br />\r\n\t\t\t<div v-for=\"address in patientdata.address\" :key=\"address.use\">\r\n\t\t\t\t<div class=\"ml-2\">\r\n\t\t\t\t\t<strong>{{ address.use }} -</strong>\r\n\t\t\t\t\t{{ address.line.toString() }}, {{ address.city }},\r\n\t\t\t\t\t{{ address.district }}, {{ address.state }}, {{ address.postalCode }},\r\n\t\t\t\t\t{{ address.country }}\r\n\t\t\t\t\t<span v-if=\"address.period?.start\"><strong>From</strong></span>\r\n\t\t\t\t\t{{ address.period?.start }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<strong>Language: </strong\r\n\t\t\t>{{ patientdata.communication[0].language.coding[0].display }} <br />\r\n\t\t\t<strong>General Practitioner </strong\r\n\t\t\t>{{ patientdata.generalPractitioner[0].display }}<br />\r\n\t\t\t<strong>Managing Organization </strong\r\n\t\t\t>{{ patientdata.managingOrganization.display }}<br />\r\n\t\t\t<hr />\r\n\t\t\t<strong>Access code:</strong>\r\n\t\t\t<p class=\"ml-2\" style=\"word-break: break-all\">{{ accesstoken }}</p>\r\n\t\t\t<strong>Patient Resource:</strong>\r\n\t\t\t<pre>{{ patientdata }}</pre>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport axios from 'axios';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcode: '',\r\n\t\t\t\taccesstoken: '',\r\n\t\t\t\tpatient: '',\r\n\t\t\t\tpatientdata: {},\r\n\t\t\t\tclientId: '2a8767b8-2c3c-474a-8ffa-00e4d2f93308', // Replace with your client id\r\n\t\t\t\tredirect: 'http://localhost:3000/mychart',\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tauthorizeLink() {\r\n\t\t\t\treturn `https://fhir.epic.com/interconnect-fhir-oauth/oauth2/authorize?response_type=code&redirect_uri=${this.redirect}&client_id=${this.clientId}&state=1234&scope=patient.read, patient.search`;\r\n\t\t\t},\r\n\t\t},\r\n\t\tasync mounted() {\r\n\t\t\tconsole.log(this.$route.query.code);\r\n\t\t\tthis.code = this.$route.query.code;\r\n\t\t\tif (this.code != undefined) {\r\n\t\t\t\tconst params = new URLSearchParams();\r\n\t\t\t\tparams.append('grant_type', 'authorization_code');\r\n\t\t\t\tparams.append('redirect_uri', this.redirect);\r\n\t\t\t\tparams.append('code', this.code);\r\n\t\t\t\tparams.append('client_id', this.clientId);\r\n\t\t\t\tparams.append('state', '1234');\r\n\t\t\t\tconst config = {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tawait axios\r\n\t\t\t\t\t.post(\r\n\t\t\t\t\t\t'https://fhir.epic.com/interconnect-fhir-oauth/oauth2/token',\r\n\t\t\t\t\t\tparams,\r\n\t\t\t\t\t\tconfig\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\t\tthis.accesstoken = response.data.access_token;\r\n\t\t\t\t\t\tthis.patient = response.data.patient;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function (error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this.accesstoken != '') {\r\n\t\t\t\tawait axios\r\n\t\t\t\t\t.get(\r\n\t\t\t\t\t\t`https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4/Patient/${this.patient}`,\r\n\t\t\t\t\t\t{ headers: { Authorization: `Bearer ${this.accesstoken}` } }\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\tthis.patientdata = response.data;\r\n\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\t// const state = reactive({ count: 0 })\r\n</script>\r\n\r\n<style>\r\nbody {\r\n    background-image: url('../assets/stock.jpg');\r\n    background-repeat: no-repeat;\r\n    background-attachment: fixed;\r\n    background-size: cover;\r\n    color: #1815ac;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}